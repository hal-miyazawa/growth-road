/* =========================================================
  ProjectModal.module.scss
  ç›®çš„ï¼š
  - ç”»é¢å…¨ä½“ã‚’æš—ãã™ã‚‹ backdrop + ä¸­å¤®ã« modal
  - ä¸Šéƒ¨ï¼šãƒ©ãƒ™ãƒ« / ãƒ”ãƒ³ / é–‰ã˜ã‚‹
  - ä¸­å¤®ï¼šãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåå…¥åŠ›
  - ä¸‹éƒ¨ï¼šã‚¿ã‚¹ã‚¯ã®ã€Œã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã€
    - ç¸¦ç·šã¯1æœ¬ã ã‘ï¼ˆ.timeline::beforeï¼‰
    - ã€‡(dot)ã¯é–‹å§‹ç‚¹ãƒ»çµ‚äº†ç‚¹ã®ã¿
    - ã‚¿ã‚¹ã‚¯ã‚«ãƒ¼ãƒ‰ã¯ç·šã®ä¸Šã«é‡ãªã‚‹ï¼ˆz-indexç®¡ç†ï¼‰
========================================================= */

/* =========================
   Variablesï¼ˆè¦‹ãŸç›®ã®å…±é€šå€¤ï¼‰
========================= */
/* ã€‡ï¼ˆé–‹å§‹ç‚¹/çµ‚äº†ç‚¹ï¼‰ã®ç›´å¾„ */
$dot: 22px;
/* ç¸¦ç·šã®å¤ªã• */
$lineW: 8px;
/* ï¼ˆã‚‚ã—ä¸‹éƒ¨ã«+ã‚’ç½®ãå ´åˆã®ï¼‰ãƒœã‚¿ãƒ³ã‚µã‚¤ã‚º */
$addSize: 70px;
/* ã‚¿ã‚¹ã‚¯é–“ã®ç¸¦ã®é–“éš” */
$gap: 28px;
/* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ä¸Šéƒ¨ã®ä½™ç™½ï¼ˆç·šã®é–‹å§‹ä½ç½®è¨ˆç®—ã«ä½¿ã†ï¼‰ */
$padTop: 16px;

/* =========================
   Backdrop / Modalï¼ˆãƒ¢ãƒ¼ãƒ€ãƒ«å…¨ä½“ã®åœŸå°ï¼‰
========================= */

/* èƒŒæ™¯ã®æš—ã„å¹•ï¼šç”»é¢å…¨ä½“ã‚’è¦†ã† */
.backdrop {
  position: fixed;
  inset: 0;
  background: rgba(0, 0, 0, 0.35);
  z-index: 1000;

  /* ä¸­å¤®ã« modal ã‚’é…ç½® */
  display: grid;
  place-items: center;
}

/* ç™½ã„ãƒ¢ãƒ¼ãƒ€ãƒ«æœ¬ä½“ */
.modal {
  width: min(800px, 92vw);
  max-height: min(760px, 86vh);

  background: #fff;
  border-radius: 14px;
  box-shadow: 0 18px 60px rgba(0, 0, 0, 0.25);

  overflow: hidden; /* â† ã“ã‚ŒãŒé‡è¦ï¼šè§’ä¸¸ã§åˆ‡ã‚‹ */
  position: relative;
}

.modalInner {
  max-height: min(760px, 86vh);
  overflow: auto;

  padding: 26px 28px 22px;

  /* ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒãƒ¼å«ã‚ã¦è§’ä¸¸ã«æ²¿ã‚ã›ã‚‹ */
  border-radius: inherit;
}

/* =========================
   Top Rowï¼ˆä¸Šæ®µï¼šãƒ©ãƒ™ãƒ« / ãƒ”ãƒ³ / é–‰ã˜ã‚‹ï¼‰
========================= */

.topRow {
  display: flex;
  align-items: center;
  justify-content: space-between;
}

/* ã€Œãƒ©ãƒ™ãƒ«â–¼ã€ãƒœã‚¿ãƒ³ */
.labelBtn {
  border: none;
  background: transparent;
  cursor: pointer;

  font-size: 20px;
  font-weight: 600;
  color: #333;

  padding: 6px 8px;
  border-radius: 10px;

  /* hoverï¼šè–„ã„èƒŒæ™¯ */
  &:hover {
    background: rgba(0, 0, 0, 0.06);
  }

  /* ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰æ“ä½œæ™‚ã®ãƒ•ã‚©ãƒ¼ã‚«ã‚¹ */
  &:focus-visible {
    outline: 2px solid rgba(0, 0, 0, 0.35);
    outline-offset: 2px;
  }
}

/* â–¼ã®è¦‹ãŸç›® */
.caret {
  margin-left: 6px;
  font-size: 16px;
  opacity: 0.8;
}

/* å³ä¸Šã®ã‚¢ã‚¤ã‚³ãƒ³ç¾¤ï¼ˆğŸ“Œ ã¨ âœ•ï¼‰ */
.topRight {
  display: flex;
  align-items: center;
  gap: 10px;
}

/* ä¸¸ã„ã‚¢ã‚¤ã‚³ãƒ³ãƒœã‚¿ãƒ³ */
.iconBtn {
  width: 40px;
  height: 40px;

  display: grid;
  place-items: center;

  border: none;
  background: transparent;
  cursor: pointer;

  font-size: 22px;
  border-radius: 999px;

  &:hover {
    background: rgba(0, 0, 0, 0.06);
  }
  &:focus-visible {
    outline: 2px solid rgba(0, 0, 0, 0.35);
    outline-offset: 2px;
  }
}

/* =========================
   Project Nameï¼ˆãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåå…¥åŠ›ï¼‰
========================= */

.projectNameRow {
  margin-top: 18px;
  display: grid;
  justify-items: center;
}

/* ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆåå…¥åŠ›ï¼ˆä¸­å¤®å¯„ã›ãƒ»ä¸‹ç·šä»˜ãæƒ³å®šï¼‰ */
.projectNameInput {
  width: min(520px, 86%);
  border: none;
  outline: none;
  background: transparent;

  text-align: center;
  font-size: 38px;
  font-weight: 700;
  color: #777;

  &::placeholder {
    color: #aaa;
  }
}

/* å…¥åŠ›ã®ä¸‹ç·š */
.projectUnderline {
  margin-top: 10px;
  width: min(400px, 86%);
  height: 3px;
  background: rgba(0, 0, 0, 0.35);
  border-radius: 999px;
}

/* =========================
   Timelineï¼ˆç¸¦ç·š + é–‹å§‹/çµ‚äº†ã®ã€‡ï¼‰
========================= */

/* ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®ãƒ©ãƒƒãƒ‘ãƒ¼ */
.timeline {

    /* è¿½åŠ ï¼šã‚«ãƒ¼ãƒ‰å¹…ï¼ˆãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–ï¼‰ */
    --card-w: min(420px, 70vw);
    --card-half: calc(var(--card-w) / 2);

    position: relative; /* ::before(ç¸¦ç·š) ã®åŸºæº– */
    margin-top: 22px;

    display: flex;
    flex-direction: column;
    align-items: center;

    /* ã€‡ / ãƒªã‚¹ãƒˆ / ã€‡ / ï¼ˆ+ãªã©ï¼‰ã®ç¸¦é–“éš” */
    gap: $gap;

    /* ä¸Šä¸‹ã«ä½™ç™½ï¼ˆç·šã®é–‹å§‹/çµ‚äº†è¨ˆç®—ã¨åˆã‚ã›ã‚‹ï¼‰ */
    padding: 16px 0;

  /* ç¸¦ç·šï¼šã“ã®1æœ¬ã ã‘ã§ã€Œã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³æ„Ÿã€ã‚’ä½œã‚‹ */
  &::before {
    content: "";
    position: absolute;

    /* çœŸã‚“ä¸­ã«å›ºå®š */
    left: 50%;
    transform: translateX(-50%);

    width: $lineW;
    background: #111;
    border-radius: 999px;

    /* ---------------------------------------------
      ç·šã®é–‹å§‹ä½ç½®ï¼ˆtopï¼‰ï¼š
      - ã‚¿ã‚¤ãƒ ãƒ©ã‚¤ãƒ³ã®padding-top($padTop)ã‹ã‚‰
      - é–‹å§‹dotã®ã€Œä¸­å¿ƒã€ã¾ã§ä¼¸ã°ã—ãŸã„ã®ã§ dot/2 ã‚’è¶³ã™
      ï¼ã€Œã€‡ã®ä¸­å¿ƒã€ã‹ã‚‰ç·šãŒå§‹ã¾ã‚‹ã‚¤ãƒ¡ãƒ¼ã‚¸
    --------------------------------------------- */
    top: calc(#{$padTop} + #{$dot} / 2);

    /* ---------------------------------------------
      ç·šã®çµ‚äº†ä½ç½®ï¼ˆbottomï¼‰ï¼š
      - ã€‡ã§çµ‚ã‚ã‚‰ã›ãŸã„ãªã‚‰ã€Œdot/2ã€ãŒåŸºæœ¬
      - ã“ã“ãŒã‚ºãƒ¬ã‚‹ã¨ã€Œç·šãŒã€‡ã‚’è²«ã/å±Šã‹ãªã„ã€ã«ãªã‚‹
      â€»ã„ã¾ bottom: $dot ã«ãªã£ã¦ã‚‹ã®ã§ã€å¿…è¦ãªã‚‰
         bottom: calc(#{$dot} / 2);
         ã«ã™ã‚‹ã¨ä¸­å¿ƒä¸€è‡´ã«ãªã‚Šã‚„ã™ã„
    --------------------------------------------- */
    bottom: $dot;

    /* ç·šã¯ä¸€ç•ªä¸‹ã« */
    z-index: 0;
  }
}

/* é–‹å§‹ç‚¹/çµ‚äº†ç‚¹ã®ã€‡ */
.dot {
  width: $dot;
  height: $dot;
  border-radius: 999px;
  background: #d9d9d9;

  /* ã€‡ã¯ç·šã‚ˆã‚Šå‰é¢ */
  z-index: 2;

  box-shadow: 0 6px 18px rgba(0, 0, 0, 0.12);
}

/* =========================
   Task Listï¼ˆã‚«ãƒ¼ãƒ‰ä¸€è¦§ï¼‰
========================= */

.list {
  width: 100%;
  display: flex;
  flex-direction: column;
  gap: $gap;
  z-index: 1;
}

/* âœ… gridã‚’ã‚„ã‚ã¦ã€Œã‚«ãƒ¼ãƒ‰ä¸­å¿ƒå›ºå®šã€ç”¨ã®åœŸå°ã«ã™ã‚‹ */
.item {
  position: relative;
  min-height: 120px; /* taskCardã®é«˜ã•ã¨åŒã˜ */
}

/* âœ… ã‚«ãƒ¼ãƒ‰ã¯å¸¸ã«ç·š(50%)ã®ä¸­å¿ƒã«ç½®ã */
.taskCard {
  width: var(--card-w);
  height: 100px;

  position: relative;
  left: 50%;
  transform: translateX(-50%);

  border-radius: 28px;
  /* âœ… ç™½èƒŒæ™¯ + æ ç·š */
  background: #fff;
  border: 3px solid rgba(0, 0, 0, 0.22);

  display: grid;
  place-items: center;

  box-shadow: 0 12px 30px rgba(0, 0, 0, 0.18);
  z-index: 1; /* ç·šã‚ˆã‚Šä¸Š */
}

/* âœ… å³ã®ãƒœã‚¿ãƒ³ã¯ã‚«ãƒ¼ãƒ‰ã®å³ã«ã€Œåˆ¥é…ç½®ã€ */
.itemRight {
  position: absolute;
  top: 50%;
  left: calc(50% + var(--card-half) + 8px);
  transform: translateY(-50%);

  display: flex;
  align-items: center;
  gap: 5px;
}
/* ã‚¿ã‚¹ã‚¯åå…¥åŠ› */
.taskInput {
  width: 70%;
  border: none;
  outline: none;
  background: transparent;

  text-align: center;
  font-size: 40px;
  font-weight: 400;
  color: #777;

  &::placeholder {
    color: #aaa;
  }
}



/* =========================
   Buttonsï¼ˆå³å´æ“ä½œãƒœã‚¿ãƒ³ç³»ï¼‰
========================= */

/* å³å´ã®å…±é€šï¼šâ‹® / -ï¼ˆè¦‹ãŸç›®æƒãˆã‚‹ï¼‰ */
.moreBtn,
.removeBtn {
  border: none;
  background: transparent;
  cursor: pointer;

  font-size: 42px;
  line-height: 1;

  padding: 6px 8px;
  border-radius: 10px;

  &:hover {
    background: rgba(0, 0, 0, 0.06);
  }
  &:focus-visible {
    outline: 2px solid rgba(0, 0, 0, 0.35);
    outline-offset: 2px;
  }
}

/* è¡Œå†…ã®ï¼‹ï¼šremoveBtnã¨åŒã˜è¦‹ãŸç›®ã§ä½¿ã† */
.addInlineBtn {
  @extend .removeBtn;
}

/* ï¼ˆã‚‚ã—ä¸‹ã«ç½®ãï¼‹ã‚’æ®‹ã™ãªã‚‰ï¼‰ä¸¸ã„ï¼‹ãƒœã‚¿ãƒ³ */
.addBtn {
  width: $addSize;
  height: $addSize;

  display: grid;
  place-items: center;

  border: none;
  background: #fff;
  cursor: pointer;

  font-size: 72px;
  line-height: 1;
  border-radius: 999px;

  /* ç·šã‚ˆã‚Šå‰é¢ã« */
  z-index: 2;

  &:hover {
    background: rgba(255, 255, 255, 0.92);
  }
  &:focus-visible {
    outline: 2px solid rgba(0, 0, 0, 0.35);
    outline-offset: 2px;
  }
}

/* =========================
   Footerï¼ˆä¿å­˜ãƒœã‚¿ãƒ³ï¼‰
========================= */

.footer {
  margin-top: 18px;
  display: flex;
  justify-content: flex-end;
}

/* ä¿å­˜ãƒœã‚¿ãƒ³ */
.saveBtn {
  border: none;
  cursor: pointer;

  background: #444;
  color: #fff;

  font-size: 22px;
  padding: 10px 22px;
  border-radius: 10px;

  box-shadow: 0 10px 24px rgba(0, 0, 0, 0.18);

  &:hover {
    filter: brightness(0.95);
  }
  &:active {
    transform: translateY(1px);
  }
  &:focus-visible {
    outline: 2px solid rgba(0, 0, 0, 0.35);
    outline-offset: 2px;
  }
}

.fieldError {
  margin-top: 6px;
  font-size: 24px;
  color: #e53935;
}

.itemLeft {
  position: absolute;
  top: 50%;
  left: calc(50% - var(--card-half) - 40px); /* â†ã‚«ãƒ¼ãƒ‰å·¦ç«¯ã‚ˆã‚Šå°‘ã—å·¦ */
  transform: translateY(-50%);
  width: 40px;

  display: flex;
  justify-content: center;
  z-index: 3; /* ã‚«ãƒ¼ãƒ‰ã‚ˆã‚Šå‰ */
}

.expandBtn {
  background: transparent;
  border: none;
  cursor: pointer;
  padding: 4px;
}

.chev {
  width: 22px;
  height: 22px;
  transition: transform 0.15s ease;
}

.expandBtn[data-open="1"] .chev {
  transform: rotate(180deg);
}

.expandSpacer {
  width: 22px;
  height: 22px;
}

/* å­ãŒã„ã‚‹è¦ª ã‹ã¤ å±•é–‹ä¸­ ã®ã¨ãã ã‘ */
.item[data-parent="1"][data-expanded="1"] .taskCard {
  background: #e6e6e6; /* å¥½ã¿ã§èª¿æ•´ */
}